<b>Company: </b> <input type='text' size='15' id='story' value='SAP'/><br/><br/>
<button id='get_stories'>Get Quotes</button>
<div id='results'></div>
<script src="http://yui.yahooapis.com/3.8.0/build/yui/yui-min.js"></script>
<script type="text/javascript" src="dist/jquery.min.js"></script>
<script type="text/javascript" src="dist/jquery.jqplot.min.js"></script>
<script type="text/javascript" src="dist/plugins/jqplot.dateAxisRenderer.min.js"></script>
<link rel="stylesheet" type="text/css" hrf="dist/jquery.jqplot.min.css" />
<script>
// Calls YQL Web service, parses results, and outputs results
YUI().use('node', 'event', 'yql', function(Y) {
  Y.one("#get_stories").on('click',function() {
    var stories = "<div><ul>";
    var story = Y.one('#story').get('value') || 'SAP';
    var news_url = "http://finance.yahoo.com/q/hp?s="+story+"&a=00&b=23&c=2013&d=00&e=25&f=2013&g=d";
    var yql_query = "select * from html where url='" + news_url + "'";
    yql_query += " and xpath='//table[@class=\"yfnc_datamodoutline1\"]'";
    Y.YQL(yql_query, function(response) {
	var count = response.query.results.table.tr.td.table.tr.length;
	var strArray = [];
	for(var i = 1; i < count-1;i++)
	{
	console.log(i);
	try{
		var dateString = new Date(response.query.results.table.tr.td.table.tr[i].td[0].p);
		var str = dateString.getFullYear() + "-" + (dateString.getMonth()+1) + "-" + dateString.getDate();
		var value = (response.query.results.table.tr.td.table.tr[i].td[4].p);
		value = parseFloat(value);
		strArray.push([str,value]);
		}
		catch(e)
		{}
	}
	console.log(strArray);
	$("#results").html("");
	  var line1=[['2012-08-12 4:00PM',4], ['2012-09-12 4:00PM',6.5], ['2012-10-12 4:00PM',5.7], ['2012-11-12 4:00PM',9], ['2012-12-12 4:00PM',8.2]];
  var plot1 = $.jqplot('results', [strArray], {
    title:'Date',
    axes:{
        xaxis:{
            renderer:$.jqplot.DateAxisRenderer,
			tickOptions:{formatString:"%b %#d %y"},min:"Jan 22 2013",tickInterval:"1 day"
        }
    },
    series:[{lineWidth:4, markerOptions:{style:'circle'}}]
  });
    });
  }); 
});
</script>